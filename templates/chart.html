<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞—Ñ–∏–∫ {{ symbol }} - AI-—Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç T-Bank</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #6f42c1;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .nav {
            margin-bottom: 20px;
        }
        .nav a {
            display: inline-block;
            background-color: #6c757d;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            margin: 5px;
            border-radius: 5px;
        }
        .nav a:hover {
            background-color: #545b62;
        }
        .chart-container {
            width: 100%;
            height: 600px;
        }
        .info-panel {
            background-color: #f8f9fa;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            border-left: 5px solid #6f42c1;
        }
        .legend {
            margin-top: 15px;
            font-size: 14px;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 10px 5px 0;
        }
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 3px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä –ì—Ä–∞—Ñ–∏–∫ –∞–Ω–∞–ª–∏–∑–∞ {{ symbol }}</h1>
        <p>–ö–æ—Ç–∏—Ä–æ–≤–∫–∏ –∞–∫—Ü–∏–π —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏</p>
    </div>

    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="nav">
            <a href="/">üè† –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/analyze">üìä –ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</a>
            <a href="/backtest">üìà –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥</a>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ -->
        <div id="chart-container" class="chart-container">
            <!-- Plotly –≥—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —Å—é–¥–∞ -->
        </div>

        <!-- –õ–µ–≥–µ–Ω–¥–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="info-panel">
            <h4>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ:</h4>
            <div class="legend">
                <div class="legend-item">
                    <span class="legend-color" style="background-color: blue;"></span>
                    –¶–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: orange;"></span>
                    RSI (–ø—Ä–∞–≤–∞—è –æ—Å—å Y)
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: red;"></span>
                    SMA 20 (–ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–∞—è)
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: green;"></span>
                    SMA 50 (–ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–∞—è)
                </div>
            </div>

            <br>
            <h4>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:</h4>
            <ul>
                <li><strong>RSI (Relative Strength Index):</strong> –ò–Ω–¥–µ–∫—Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏–ª—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å</li>
                <li><strong>SMA (Simple Moving Average):</strong> –ü—Ä–æ—Å—Ç–∞—è —Å–∫–æ–ª—å–∑—è—â–∞—è —Å—Ä–µ–¥–Ω—è—è</li>
                <li><strong>MACD (Moving Average Convergence Divergence):</strong> –°—Ö–æ–∂–¥–µ–Ω–∏–µ/—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å–∫–æ–ª—å–∑—è—â–∏—Ö —Å—Ä–µ–¥–Ω–∏—Ö</li>
            </ul>

            <p><em>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</em> –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –∞–Ω–∞–ª–∏–∑–µ —Ä—ã–Ω–∫–∞.</p>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∞ –∏–∑ Flask
        const graphData = {{ graph_json|safe }};

        // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫ —Å –ø–æ–º–æ—â—å—é Plotly
        if (graphData && graphData.data && graphData.data.length > 0) {
            Plotly.newPlot('chart-container', graphData.data, graphData.layout);
        } else {
            document.getElementById('chart-container').innerHTML =
                '<div style="text-align: center; padding: 50px; color: #6c757d;">' +
                '<h3>–ì—Ä–∞—Ñ–∏–∫ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω</h3>' +
                '<p>–î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>' +
                '</div>';
        }
    </script>
</body>
</html>